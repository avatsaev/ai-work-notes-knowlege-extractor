#### 5/1/2023

- Review tech scope with 
- Update tech scope, add missing sections, add more details
- Meet with Melanie about background jobs
	- Configure the performance tuning with value feature switch?
		- store the configs in the feature swtiches
	- Fanout apporach, mutex, data selection?
		- use outer joins
	- Can jobs store their results somewhere?
		- logs in kibana
	- Can jobs store logs and how to read them?
		- return values of each job can be read in the dashboard
	- During fanout (every hour job) how to prevent the jobs to run in parallalel (wait for previous job to finished before starting)
		- Jobs are enqued automatically
	- create a rake task that emulates the job logic to test on signle or several records
	- To import serveral records at the same time use the `MasterPatientAppointement.import()`
	- Use `lowest_fast` priority
	- Check JOB_QUEUE[:cron]
	- Debug tools:
		- in case of problem contact: #team_peer_atp
		- [https://pro.doctolib.fr/admin/debug_pages/scheduling_tasks](https://pro.doctolib.fr/admin/debug_pages/scheduling_tasks)
		- new relic
		- [https://pro.doctolib.fr/admin/debug_pages/resque_jobs](https://pro.doctolib.fr/admin/debug_pages/resque_jobs)
		- https://one.newrelic.com/data-exploration/query-builder?duration=1800000&state=47ef580d-043d-7de3-7d6c-d559462dc484 time spent in queue before execution 
		- kibana 
	- Example jobs:
		- rake task: `engines/patient_account_documents/lib/scripts/create_patient_account_documents_from_documents.rb`
		- Jobs: `engines/patient_account_documents/app/jobs/patient_account_documents/`